(this["webpackJsonppeople-frontend"]=this["webpackJsonppeople-frontend"]||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var o=n(3),a=n.n(o),r=n(20),s=n.n(r),c=(n(26),n(27),n(21)),i=n(2),u=n(7),l=n(8),p=n(10),j=n(9),h=n(4),d=n.n(h),b=n(0),f=window.location.href,O=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={person:{FirstName:"",LastName:"",CityId:0,PhoneNr:"",SocialSecurityNr:"",LanguageIds:[1]},countries:[],cities:[]},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;d.a.get("".concat(f,"/countries")).then((function(e){t.setState({countries:e.data.countries}),t.setState({cities:e.data.countries.flatMap((function(t){return t.cities}))}),t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{CityId:e.data.countries[0].cities[0].id})})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.props.handleSubmit(t.state.person)},children:[Object(b.jsx)("input",{value:this.state.person.FirstName,onChange:function(e){t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{FirstName:e.target.value})})},type:"text",required:!0}),Object(b.jsx)("input",{value:this.state.person.LastName,onChange:function(e){t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{LastName:e.target.value})})},type:"text"}),Object(b.jsx)("input",{value:this.state.person.PhoneNr,onChange:function(e){t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{PhoneNr:e.target.value})})},type:"text"}),Object(b.jsx)("input",{value:this.state.person.SocialSecurityNr,onChange:function(e){t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{SocialSecurityNr:e.target.value})})},type:"text"}),Object(b.jsx)("select",{id:"cities",name:"cities",type:"text",defaultValue:0,onChange:function(e){t.setState({person:Object(i.a)(Object(i.a)({},t.state.person),{},{CityId:parseInt(e.target.value)})})},children:this.state.cities.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t.name},t.name)}))}),Object(b.jsx)("button",{children:"Create person"})]})}}]),n}(a.a.Component),v=function(t){var e=t.person,n=t.deletePersonFunction;return Object(b.jsxs)("div",{children:[e.city.name,Object(b.jsx)("button",{onClick:function(){return n(e)},children:"DELETE"})]})},m=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={showDetails:!1},t.person=t.props.person,t.setShowDetails=function(e){t.setState({showDetails:e})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:this.person.firstName}),Object(b.jsx)("td",{children:this.person.lastName}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return t.setShowDetails(!t.state.showDetails)},children:"Show details"})}),this.state.showDetails?Object(b.jsx)("td",{children:Object(b.jsx)(v,{person:this.person,deletePersonFunction:this.props.deletePersonFunction})}):null]})}}]),n}(a.a.Component),x=function(t){var e=t.people,n=t.deletePersonFunction;return Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Lastname"}),Object(b.jsx)("th",{children:"City"})]})}),Object(b.jsx)("tbody",{children:e.map((function(t){return Object(b.jsx)(m,{deletePersonFunction:n,person:t},t.id)}))})]})},y=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={showCreateForm:!1,people:[]},t.addNewPerson=function(e){var n=JSON.stringify(e);d.a.post("".concat(f,"/people"),n,{headers:{"Content-Type":"application/json"}}).then((function(e){t.setState((function(t){return{people:[].concat(Object(c.a)(t.people),[e.data])}}))})).catch((function(t){console.log(t)}))},t.removePerson=function(e){d.a.delete("".concat(f,"/people/").concat(e.id)).then((function(n){200===n.status&&t.setState((function(t){return{people:t.people.filter((function(t){return t.id!==e.id}))}}))})).catch((function(t){console.log(t)}))},t.sortPeopleByName=function(){t.setState((function(t){return{people:t.people.sort((function(t,e){return t.firstName<e.firstName?-1:e.firstName<t.firstName?1:0}))}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;d.a.get("".concat(f,"/people")).then((function(e){t.setState({people:e.data.people})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:this.sortPeopleByName,children:"SORT BY NAME"}),Object(b.jsx)(x,{deletePersonFunction:this.removePerson,people:this.state.people}),Object(b.jsx)("button",{onClick:function(){return t.setState((function(t){return{showCreateForm:!t.showCreateForm}}))},children:"Create person"}),this.state.showCreateForm?Object(b.jsx)(O,{handleSubmit:this.addNewPerson}):null]})}}]),n}(a.a.Component);var S=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(y,{})})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,o=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),o(t),a(t),r(t),s(t)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),g()}},[[47,1,2]]]);
//# sourceMappingURL=main.c37f711d.chunk.js.map